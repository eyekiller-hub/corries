{% schema %}
  {
    "name": "Product tabs",
    "settings": [
      {
        "type": "checkbox",
        "id": "enable",
        "label": "Enable?",
        "default": true
      },
      {
        "type": "text",
        "id": "tab_1_title",
        "label": "Tab #1 title"
      },
      {
        "type": "text",
        "id": "tab_2_title",
        "label": "Tab #2 title"
      },
      {
        "type": "text",
        "id": "tab_3_title",
        "label": "Tab #3 title"
      },
      {
        "type": "text",
        "id": "tab_4_title",
        "label": "Tab #4 title"
      }
    ]
  }
{% endschema %}

{% assign enable = section.settings.enable | default: false %}

{% assign tab_1_title = section.settings.tab_1_title | default: false %}

{% assign tab_2_title = section.settings.tab_2_title | default: false %}

{% assign tab_3_title = section.settings.tab_3_title | default: false %}

{% assign tab_4_title = section.settings.tab_4_title | default: false %}

{% assign tab_1_body = 'tab_1_body' %}

{% assign tab_2_body = 'tab_2_body' %}

{% assign tab_3_body = 'tab_3_body' %}

{% assign tab_4_body = 'tab_4_body' %}

{% capture array_title %}
{{ tab_1_title }} |
{{ tab_2_title }} |
{{ tab_3_title }} |
{{ tab_4_title }}
{% endcapture %}

{% assign array_title = array_title | strip | split: '|' %}

{% capture array_body %}
{{ tab_1_body }} |
{{ tab_2_body }} |
{{ tab_3_body }} |
{{ tab_4_body }}
{% endcapture %}

{% assign array_body = array_body | strip | split: '|' %}

{% if enable %}
  <div class="padding-top--up-2 large--padding-top--up-5">
    <div data-module-accordion>
      <div class="container-default">
        <nav class="hide large--show">
          <ul class="grid text-center margin--none">
            {% for title_ in array_title %}
              {% assign title = title_ | default: false %}

              {% assign body = array_body[forloop.index0] | default: false %}

              {% unless title and body %}
                {% continue %}
              {% endunless %}

              <li class="grid-item">
                <div style="margin-left: -1px; margin-right: -1px;">
                  <button
                    class="
                      button-primary
                      padding-top-bottom--0
                      box-color-light hover-box-color-beige
                      border-grey-lighter hover-border-beige
                      text-color-grey-dark hover-text-color-grey-dark
                      font-size--inherit line-height--up-8
                      font-weight-500
                    "
                    type="button"
                    data-ref-button='{
                      "index": {{ forloop.index0 | json }},
                      "active": {% if forloop.first %}["large"]{% else %}false{% endif %}
                    }'>
                    {{ title }}
                  </button>
                </div>
              </li>
            {% endfor %}
          </ul>
        </nav>
      </div>

      <div class="box-color-beige">
        <div class="padding-top-bottom--up-2 large--padding-top-bottom--up-5">
          <div class="container-default">
            <div class="box-center" style="max-width: 750px;">
              {% for title_ in array_title %}
                {% assign title = title_ | default: false %}

                {% assign body = array_body[forloop.index0] | default: false %}

                {% unless title and body %}
                  {% continue %}
                {% endunless %}

                <div>
                  <div class="large--hide">
                    <button
                      class="
                        button-primary
                        padding-top-bottom--0
                        box-color-light hover-box-color-beige
                        border-grey-lighter hover-border-beige
                        text-color-grey-dark hover-text-color-grey-dark
                        font-size--inherit line-height--up-8
                        font-weight-500
                      "
                      type="button"
                      data-ref-button='{ "index": {{ forloop.index0 | json }} }'>
                      {{ title }}
                    </button>
                  </div>

                  <div data-ref-panel='{ "index": {{ forloop.index0 | json }} }'>
                    <h2 class="
                      font-size--up-4
                      medium--font-size--up-5
                      large--font-size--up-8 large--line-height--up-10
                      font-weight-700 text-caps text-color-navy
                      margin-bottom--0 large--margin-bottom--up-2
                      hide large--show
                    ">
                      {{ title }}
                    </h2>

                    <div class="rte large--font-size--up-2 large--line-height--up-8">
                      {{ body }}
                    </div>
                  </div>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endif %}
