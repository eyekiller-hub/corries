{% assign array_title = page.metafields.faq.title | default: false %}

{% assign array_copy = page.metafields.faq.copy | default: false %}

<div class="page-spacing">
  <div class="container-default">
    {% include 'breadcrumbs' %}

    <div class="box-center" style="max-width: 910px;">
      <div class="rte rte--page text-center">
        <h1>
          {{ page.title }}
        </h1>

        {{ page.content }}
      </div>
    </div>

    {% if array_title and array_copy %}
      <div class="margin-top--up-2 large--margin-top--up-4">
        <div class="box-center" style="max-width: 810px;">
          <ul
            class="margin-bottom--none"
            style="margin-top: 1px;"
            data-module-accordion>
            {% for title in array_title %}
              {% assign copy = array_copy[forloop.index0] %}

              <li style="margin-top: -1px;">
                <button
                  class="
                    input-reset block one
                    border-grey-lightest
                    hover-box-color-beige
                  "
                  type="button"
                  data-ref-button='{
                    "index": {{ forloop.index | json }},
                    "active_class": ["box-color-beige", "border-beige", "border-bottom-beige-active!"],
                    "inactive_class": ["border-grey-lightest"]
                  }'>
                  <div class="
                    container-padding large--padding-left-right--up-2
                    padding-top-bottom--down-1 large--padding-top-bottom--0
                    font-size--down-2 line-height--up-7
                    large--font-size--inherit large--line-height--up-9
                    font-weight-500 text-caps-letter-spacing
                    text-color-grey-dark
                  ">
                    <div class="flex-bar--down-1">
                      <div class="flex-item">
                        {{ title }}
                      </div>

                      <div class="flex-item-auto">
                        <div class="font-size--down-6">
                          <div data-ref-icon-show='{ "index": {{ forloop.index | json }} }'>
                            {% include 'svg-arrow-bottom' %}
                          </div>

                          <div style="display: none;" data-ref-icon-hide='{ "index": {{ forloop.index | json }} }'>
                            {% include 'svg-arrow-top' %}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </button>

                <div style="display: none;" data-ref-panel='{ "index": {{ forloop.index | json }} }'>
                  <div class="box-color-beige">
                    <div class="
                      container-padding large--padding-left-right--up-2
                      padding-top-bottom--up-1 large--padding-top-bottom--up-2
                    ">
                      <div class="rte large--font-size--up-2 large--line-height--up-10">
                        {{ copy }}
                      </div>
                    </div>
                  </div>
                </div>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
  {
    "name": "FAQ body",
    "settings": [
      {
        "type": "paragraph",
        "content": "Content is managed via Page -> More actions -> Custom Fields -> FAQ."
      }
    ]
  }
{% endschema %}
